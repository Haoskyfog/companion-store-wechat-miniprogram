# 快速参考卡片

一页纸快速了解Sonnet陪玩店小程序的核心功能和操作。

---

## 🎯 三端核心功能速查

### 👑 老板端

| 页面 | 核心功能 | 关键操作 |
|------|---------|---------|
| 主页 | 查看公告、相册 | 浏览轮播图 |
| 推荐 | 查找员工 | 搜索、浏览推荐 |
| 我的 | 个人中心 | 查看VIP、钱包、直属员工 |
| 订单 | 确认订单 | 确认并支付 / 拒绝 |

**快捷路径**：
- 我的 → 我的订单 → 确认订单
- 我的 → 申请更换直属

---

### 🎮 员工端

| 页面 | 核心功能 | 关键操作 |
|------|---------|---------|
| 创建订单 | 为老板创建订单 | 选择绑定老板、填写信息、提交 |
| 提交报备 | 工作报备 | 选择任意老板、上传截图、提交 |
| 报备记录 | 查看审核结果 | 查看状态 |
| 排行榜 | 查看排名 | 了解表现 |
| 我的订单 | 订单历史 | 筛选、查看 |

**快捷路径**：
- 我的 → 创建订单 → 提交
- 我的 → 提交报备 → 提交

---

### 🛠️ 管理员端

| 页面 | 核心功能 | 关键操作 |
|------|---------|---------|
| 仪表板 | 数据概览 | 查看统计 |
| 用户管理 | 角色、绑定 | 修改角色、创建绑定 |
| 审核中心 | 报备/申请审核 | 通过 / 驳回 |
| 内容管理 | 轮播图、公告 | 添加、编辑、删除 |
| 订单管理 | 查看所有订单 | 筛选、处理客诉 |
| 老板充值 | 余额管理 | 充值、扣款 |

**快捷路径**：
- 仪表板 → 审核中心 → 审核报备
- 仪表板 → 用户管理 → 绑定关系

---

## ⚡ 关键操作流程

### 员工创建订单（完整流程）

```
1. 员工端 → 我的 → 创建订单
2. 选择老板（已绑定的老板）
3. 填写信息：
   ├─ 游戏类型 ✓
   ├─ 服务时长 ✓
   ├─ 服务金额 ✓ （重要！）
   ├─ 服务日期 ✓
   ├─ 游戏位置
   ├─ 服务内容 ✓
   └─ 备注信息
4. 提交订单
5. 等待老板确认
```

---

### 老板确认订单（完整流程）

```
1. 老板端 → 我的 → 我的订单
2. 查看待确认订单
3. 点击"确认并支付"
   ├─ 系统检查余额
   ├─ 扣除订单金额
   ├─ 增加消费总额
   ├─ 更新VIP等级
   └─ 订单完成
4. 或点击"拒绝" → 订单取消
```

---

### 员工提交报备（完整流程）

```
1. 员工端 → 我的 → 提交报备
2. 选择老板（任意老板，不限绑定）
3. 填写信息：
   ├─ 接单日期 ✓
   ├─ 游戏类型 ✓
   ├─ 服务时长 ✓
   ├─ 服务内容 ✓
   ├─ 备注说明
   └─ 订单截图（最多3张）
4. 提交报备
5. 等待管理员审核
```

---

### 管理员审核报备（完整流程）

```
1. 管理员端 → 审核中心 → 报备审核
2. 查看报备详情：
   ├─ 员工信息
   ├─ 关联老板
   ├─ 接单信息
   └─ 订单截图（点击预览）
3. 审核操作：
   ├─ 点击"通过" → 报备批准
   └─ 点击"驳回" → 报备拒绝
4. 报备从列表消失
```

---

### 管理员绑定老板和员工（完整流程）

```
1. 管理员端 → 绑定关系
2. 点击"创建绑定"
3. 选择老板
4. 选择员工
5. 确认绑定
6. 绑定关系生效
   ├─ 员工可为该老板创建订单
   └─ 老板可查看该员工信息
```

---

## 📋 数据字段速查

### 订单关键字段

| 字段 | 类型 | 说明 | 必填 |
|------|------|------|------|
| `staffId` | String | 员工openid | ✅ |
| `bossId` | String | 老板openid | ✅ |
| `game` | String | 游戏类型 | ✅ |
| `duration` | Number | 时长（小时） | ✅ |
| `amount` | Number | 金额 | ✅ |
| `date` | String | 服务日期 | ✅ |
| `services` | Array | 服务内容 | ✅ |
| `status` | String | pending/confirmed/completed/cancelled | ✅ |
| `paymentStatus` | String | unpaid/paid/cancelled | ✅ |

### 报备关键字段

| 字段 | 类型 | 说明 | 必填 |
|------|------|------|------|
| `staffId` | String | 员工openid | ✅ |
| `bossId` | String | 老板openid | ✅ |
| `date` | String | 接单日期 | ✅ |
| `game` | String | 游戏类型 | ✅ |
| `duration` | Number | 时长（小时） | ✅ |
| `services` | Array | 服务内容 | ✅ |
| `images` | Array | 截图URL数组 | ❌ |
| `status` | String | pending/approved/rejected | ✅ |

---

## 🎨 状态标识

### 订单状态

| 状态 | 颜色 | 说明 |
|------|------|------|
| pending | 🟡 黄色 | 待老板确认 |
| confirmed | 🔵 蓝色 | 已确认（老板已接受） |
| completed | 🟢 绿色 | 已完成（已支付） |
| cancelled | 🔴 红色 | 已取消 |

### 支付状态

| 状态 | 说明 |
|------|------|
| unpaid | 未支付 |
| paid | 已支付 |
| cancelled | 已取消 |

### 报备状态

| 状态 | 颜色 | 说明 |
|------|------|------|
| pending | 🟡 黄色 | 待审核 |
| approved | 🟢 绿色 | 已通过 |
| rejected | 🔴 红色 | 已驳回 |

---

## 🔢 VIP等级速查

| 等级 | 消费金额 | 故事主题 |
|------|----------|----------|
| VIP1 | ¥0 | 🌹 初入花园 |
| VIP2 | ¥666 | 🎼 琴键轻舞 |
| VIP3 | ¥1,888 | 🎵 夜空繁星 |
| VIP4 | ¥3,500 | 🌙 月光如水 |
| VIP5 | ¥8,888 | 🎨 春花绽放 |
| VIP6 | ¥18,888 | ⭐ 摘星之约 |
| VIP7 | ¥52,000 | 🎭 艺术永存 |
| VIP8 | ¥88,888 | 🌸 秘密花园 |
| VIP9 | ¥138,888 | 💫 黄金时光 |
| VIP10 | ¥288,888 | 👑 加冕之礼 |
| VIP11 | ¥500,000 | 🌟 永恒传说 |

---

## 🚨 重要提示

### 订单 vs 报备

| 对比项 | 订单 | 报备 |
|-------|------|------|
| 创建者 | 员工 | 员工 |
| 老板选择 | 只能选绑定的老板 | 可选任意老板 |
| 涉及金额 | ✅ 有金额，需支付 | ❌ 无金额 |
| 需要确认 | ✅ 老板确认 | ❌ 直接提交 |
| 需要审核 | ❌ 不需要 | ✅ 管理员审核 |
| 用途 | 正式服务确认和支付 | 工作记录和考核 |

### 权限提醒

- ⚠️ 只有管理员可以修改用户角色
- ⚠️ 只有管理员可以创建/删除绑定关系
- ⚠️ 员工只能为绑定的老板创建订单
- ⚠️ 员工可以为任意老板提交报备
- ⚠️ 老板确认订单会立即扣款

---

## 🔧 快速故障排除

| 问题 | 快速检查 | 解决方案 |
|------|---------|---------|
| 选择不到老板 | 数据库查询 | 检查云函数是否重新部署 |
| 图片显示404 | 云存储权限 | 开启存储读取权限 |
| 扣款0元 | 订单金额 | 检查创建订单时金额是否填写 |
| 报备不消失 | 状态更新 | 检查云函数日志，确认状态已更新 |
| 总流水不对 | 计算逻辑 | 查看 getStatistics 云函数日志 |

---

**打印此页作为快速参考！** 📋

---

**版本**: v2.0  
**更新**: 2025-12-16

