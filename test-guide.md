# 陪玩店小程序测试指南

## 测试前准备

1. **确保云函数已部署**
   - 在微信开发者工具中，右键点击 `cloudfunctions` 目录下的每个云函数文件夹
   - 选择「上传并部署：云端安装依赖」
   - 等待所有云函数部署完成

2. **确保数据库已初始化**
   - 在云开发控制台创建所需的7个集合
   - 创建至少一个超级管理员用户

3. **编译运行小程序**
   - 在微信开发者工具中点击「编译」

## 基本功能测试

### 1. 用户登录与角色分配

**测试步骤：**
1. 首次进入小程序，默认角色为"老板"
2. 使用管理员账号登录，进入用户管理页面
3. 修改其他用户的角色为"员工"或"管理员"
4. 重新登录验证角色切换是否正确

**预期结果：**
- 不同角色用户能正确跳转到对应的首页
- 角色权限正确限制功能访问

### 2. 绑定关系管理（管理员功能）

**测试步骤：**
1. 使用管理员账号登录
2. 进入「绑定关系管理」页面
3. 创建老板和员工的绑定关系
4. 验证绑定关系是否正确显示

**预期结果：**
- 能成功创建和删除绑定关系
- 绑定关系在列表中正确显示

### 3. 订单管理流程

**测试步骤：**
1. 使用员工账号登录，创建订单（选择已绑定的老板）
2. 使用老板账号登录，查看并确认订单
3. 使用管理员账号查看所有订单

**预期结果：**
- 员工只能为绑定的老板创建订单
- 老板只能看到自己的订单
- 订单状态能正确流转

### 4. 报备管理流程

**测试步骤：**
1. 使用员工账号提交报备（包含图片）
2. 使用管理员账号审核报备
3. 使用员工账号查看报备审核结果

**预期结果：**
- 报备能成功提交并包含图片
- 管理员能通过或驳回报备
- 审核结果正确显示

### 5. 数据统计功能

**测试步骤：**
1. 使用管理员账号查看数据统计页面
2. 使用员工账号查看个人统计
3. 验证统计数据是否准确

**预期结果：**
- 统计数据与实际数据一致
- 图表显示正确

### 6. 排行榜功能

**测试步骤：**
1. 完成一些订单后查看员工排行榜
2. 验证排行榜数据是否正确排序

**预期结果：**
- 排行榜按服务时长正确排序
- 数据实时更新

### 7. 更换直属员工流程

**测试步骤：**
1. 使用老板账号申请更换直属员工
2. 使用管理员账号审核更换申请
3. 验证绑定关系是否正确变更

**预期结果：**
- 更换申请能成功提交
- 管理员审核后绑定关系正确变更

## 常见问题排查

### 云函数调用失败
- 检查云函数是否已部署
- 检查环境ID是否正确
- 查看云函数日志

### 数据库操作失败
- 检查集合是否已创建
- 检查数据库权限设置
- 查看数据库索引是否正确

### 页面跳转异常
- 检查页面路径是否正确
- 检查角色权限逻辑

### 图片上传失败
- 检查云存储权限
- 检查文件大小限制

## 性能测试建议

1. **并发测试**：多个用户同时操作
2. **大数据测试**：大量订单和报备数据
3. **网络测试**：在不同网络环境下测试

## 安全测试建议

1. **权限测试**：验证不同角色用户的访问控制
2. **数据隔离**：确认用户只能访问自己的数据
3. **输入验证**：测试各种边界输入情况

## 测试完成标准

- [ ] 所有云函数能正常调用
- [ ] 数据库CRUD操作正常
- [ ] 用户角色权限正确
- [ ] 订单和报备流程完整
- [ ] 数据统计准确
- [ ] 页面无明显bug
- [ ] 性能满足基本要求