<!-- 管理员端 - 权益编辑 -->
<view class="page">
  <!-- 顶部导航 -->
  <view class="header">
    <view class="back-btn" bindtap="onBack">‹</view>
    <view class="header-title">权益编辑</view>
  </view>

  <!-- 老板选择 -->
  <view class="boss-selector">
    <view class="section-title">选择老板</view>
    <picker mode="selector" range="{{bossList}}" range-key="nickname" value="{{selectedBossIndex}}" bindchange="onBossChange">
      <view class="picker-box">
        <text wx:if="{{selectedBoss}}">{{selectedBoss.nickname}} (ID: {{selectedBoss.userId}})</text>
        <text wx:else class="placeholder">请选择老板</text>
        <text class="arrow">›</text>
      </view>
    </picker>
  </view>

  <!-- 权益内容编辑 -->
  <view class="content-section" wx:if="{{selectedBoss}}">
    <view class="section-title">权益内容</view>
    <view class="content-card">
      <textarea 
        class="content-input" 
        placeholder="请输入该老板的专属权益内容..."
        value="{{benefitsContent}}"
        bindinput="onContentInput"
        maxlength="500"
      />
      <view class="char-count">{{benefitsContent.length}}/500</view>
    </view>
  </view>

  <!-- 保存按钮 -->
  <view class="save-section" wx:if="{{selectedBoss}}">
    <button class="save-btn" bindtap="saveBenefits">保存权益</button>
  </view>

  <!-- 已设置权益列表 -->
  <view class="list-section">
    <view class="section-title">已设置权益的老板</view>
    <view class="benefits-list" wx:if="{{benefitsList.length > 0}}">
      <view class="benefits-item" wx:for="{{benefitsList}}" wx:key="bossId">
        <view class="item-info">
          <text class="item-name">{{item.bossNickname || '未知'}}</text>
          <text class="item-preview">{{item.content}}</text>
        </view>
        <view class="item-actions">
          <view class="edit-btn" data-boss="{{item}}" bindtap="editBenefits">编辑</view>
          <view class="delete-btn" data-id="{{item._id}}" bindtap="deleteBenefits">删除</view>
        </view>
      </view>
    </view>
    <view class="empty-state" wx:else>
      <text class="empty-text">暂无已设置权益</text>
    </view>
  </view>
</view>
