<!-- ç®¡ç†å‘˜ç«¯ - ä»ªè¡¨æ¿ -->
<view class="page">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="header">
    <view class="header-info">
      <text class="header-title">ç®¡ç†åå°</text>
      <text class="header-subtitle">æ¬¢è¿å›æ¥ï¼Œç®¡ç†å‘˜</text>
    </view>
    <view class="header-actions">
      <view class="admin-badge">Admin</view>
      <text class="icon-btn">ğŸ””</text>
    </view>
  </view>

  <!-- å¿«é€Ÿç»Ÿè®¡ -->
  <view class="stats-grid" wx:if="{{!loading}}">
    <view class="stat-item stat-blue">
      <text class="stat-value">{{statistics.users.total}}</text>
      <text class="stat-label">æ€»ç”¨æˆ·</text>
    </view>
    <view class="stat-item stat-green">
      <text class="stat-value">{{statistics.users.staff}}</text>
      <text class="stat-label">å‘˜å·¥</text>
    </view>
    <view class="stat-item stat-purple">
      <text class="stat-value">{{statistics.users.boss}}</text>
      <text class="stat-label">è€æ¿</text>
    </view>
    <view class="stat-item stat-orange">
      <text class="stat-value">{{statistics.bindings.active}}</text>
      <text class="stat-label">ç»‘å®šå…³ç³»</text>
    </view>
    <view class="stat-item stat-red">
      <text class="stat-value">{{statistics.orders.total}}</text>
      <text class="stat-label">æ€»è®¢å•</text>
    </view>
    <view class="stat-item stat-yellow">
      <text class="stat-value">{{statistics.reports.pending + statistics.requests.pending}}</text>
      <text class="stat-label">å¾…å®¡æ ¸</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{loading}}">
    <view class="loading-text">åŠ è½½ä¸­...</view>
  </view>

  <!-- å¾…åŠæé†’ -->
  <view class="todo-card" wx:if="{{!loading && (statistics.reports.pending + statistics.requests.pending) > 0}}" bindtap="onFunctionTap" data-action="audit">
    <view class="todo-content">
      <text class="todo-icon">âš ï¸</text>
      <view class="todo-info">
        <text class="todo-title">æœ‰ {{statistics.reports.pending + statistics.requests.pending}} æ¡å¾…å®¡æ ¸</text>
        <text class="todo-desc">{{statistics.reports.pending}}æ¡æŠ¥å¤‡ + {{statistics.requests.pending}}æ¡æ›´æ¢ç”³è¯·</text>
      </view>
    </view>
    <text class="arrow">â€º</text>
  </view>

  <scroll-view scroll-y="{{true}}" class="scroll-content">
    <!-- å¿«æ·åŠŸèƒ½ -->
    <view class="quick-functions">
      <text class="section-title">å¿«æ·åŠŸèƒ½</text>
      <view class="functions-grid">
        <view class="function-item" wx:for="{{functions}}" wx:key="id" data-action="{{item.action}}" bindtap="onFunctionTap">
          <view class="function-icon" style="background: {{item.bgColor}};">
            <text class="icon-emoji">{{item.icon}}</text>
          </view>
          <text class="function-label">{{item.label}}</text>
          <text class="function-desc">{{item.desc}}</text>
        </view>
      </view>
    </view>


    <!-- æœ€æ–°æŠ¥å¤‡ -->
    <view class="reports-section" wx:if="{{recentReports.length > 0}}">
      <view class="section-header">
        <text class="section-title">æœ€æ–°æŠ¥å¤‡</text>
        <text class="section-more" bindtap="onViewMoreReports">æŸ¥çœ‹å…¨éƒ¨</text>
      </view>
      <view class="reports-list">
        <view class="report-item" wx:for="{{recentReports}}" wx:key="_id">
          <view class="report-header">
            <view class="report-user">
              <view class="report-avatar" style="background: linear-gradient(135deg, #93c5fd, #67e8f9);">
                <text class="report-emoji">ğŸ®</text>
              </view>
              <view class="report-user-info">
                <text class="report-name">{{item.staffInfo.nickname}}</text>
                <text class="report-time">{{item.createTime}}</text>
              </view>
            </view>
            <view class="report-status {{item.status === 'pending' ? 'status-pending' : item.status === 'approved' ? 'status-approved' : 'status-rejected'}}">
              {{item.status === 'pending' ? 'å¾…å®¡æ ¸' : item.status === 'approved' ? 'å·²é€šè¿‡' : 'å·²é©³å›'}}
            </view>
          </view>
          <text class="report-detail">{{item.game}} {{item.duration}}å°æ—¶</text>
        </view>
      </view>
    </view>


    <!-- æ ¸å¿ƒæ•°æ® -->
    <view class="core-stats">
      <text class="section-title">æ ¸å¿ƒæ•°æ®</text>
      <view class="stats-card">
        <view class="stat-box">
          <text class="stat-big-value purple">{{statistics.orders.total}}</text>
          <text class="stat-big-label">æ€»è®¢å•</text>
          <text class="stat-trend">ğŸ“Š å®æ—¶ç»Ÿè®¡</text>
        </view>
        <view class="stat-box">
          <text class="stat-big-value green">Â¥{{statistics.revenue.total || 0}}</text>
          <text class="stat-big-label">æ€»æµæ°´</text>
          <text class="stat-trend">ğŸ’° ç´¯è®¡æ”¶å…¥</text>
        </view>
      </view>
    </view>

    <view class="bottom-spacer"></view>
  </scroll-view>
</view>
