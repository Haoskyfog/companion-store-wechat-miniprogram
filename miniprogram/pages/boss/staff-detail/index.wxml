<!-- è€æ¿ç«¯ - å‘˜å·¥è¯¦æƒ…é¡µ -->
<view class="page">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="header">
    <view class="nav-back" bindtap="goBack">â†</view>
    <view class="header-title">å‘˜å·¥è¯¦æƒ…</view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{loading}}">
    <view class="loading-text">åŠ è½½ä¸­...</view>
  </view>

  <!-- å‘˜å·¥ä¿¡æ¯ -->
  <view class="staff-detail" wx:elif="{{staff}}">
    <!-- å¤´åƒåŒºåŸŸ -->
    <view class="avatar-section">
      <view class="avatar-container">
        <image wx:if="{{staff.avatar}}" src="{{staff.avatar}}" mode="aspectFill" class="avatar-image" />
        <view wx:else class="avatar-placeholder">
          <text class="avatar-emoji">ğŸ‘§</text>
        </view>
      </view>
      <view class="staff-basic-info">
        <text class="staff-name">{{staff.nickname}}</text>
        <text class="staff-id">ID: {{staff.userId}}</text>
      </view>
    </view>

    <!-- è‡ªæˆ‘ä»‹ç»å›¾ç‰‡ -->
    <view class="intro-image-section" wx:if="{{staff.introImage}}">
      <text class="section-title">è‡ªæˆ‘ä»‹ç»å›¾ç‰‡</text>
      <image src="{{staff.introImage}}" mode="aspectFill" class="intro-image" bindtap="previewIntroImage" />
    </view>

    <!-- è¯¦ç»†ä¿¡æ¯ -->
    <view class="info-section">
      <view class="info-item">
        <text class="info-label">éŸ³è‰²ç±»å‹:</text>
        <text class="info-value">{{staff.voiceType}}éŸ³è‰²</text>
      </view>

      <view class="info-item" wx:if="{{staff.lane}}">
        <text class="info-label">åˆ†è·¯ä½ç½®:</text>
        <text class="info-value">{{staff.lane}}</text>
      </view>

      <view class="info-item">
        <text class="info-label">ä¸»ç©æ¸¸æˆ:</text>
        <text class="info-value">{{staff.game}}</text>
      </view>

      <view class="info-item">
        <text class="info-label">è‡ªæˆ‘ä»‹ç»:</text>
        <text class="info-value">{{staff.introduction}}</text>
      </view>
    </view>

    <!-- éŸ³é¢‘æ’­æ”¾åŒºåŸŸ -->
    <view class="audio-section" wx:if="{{staff.audioUrl}}">
      <view class="audio-player">
        <text class="audio-icon">ğŸµ</text>
        <view class="audio-info">
          <text class="audio-text">è¯­éŸ³ä»‹ç»</text>
          <text class="audio-time">{{formatTimeDisplay(currentTime)}} / {{formatTimeDisplay(duration)}}</text>
        </view>
        <button class="play-btn {{isPlaying ? 'playing' : ''}} {{audioLoading ? 'loading' : ''}}"
                bindtap="playAudioIntro"
                disabled="{{audioLoading}}">
          <text wx:if="{{audioLoading}}">åŠ è½½ä¸­...</text>
          <text wx:elif="{{isPlaying}}">â¸ï¸ æš‚åœ</text>
          <text wx:else>â–¶ï¸ æ’­æ”¾</text>
        </button>
      </view>

      <!-- è¿›åº¦æ¡ -->
      <view class="progress-container" wx:if="{{duration > 0}}">
        <slider class="progress-slider"
                min="0"
                max="100"
                value="{{progress}}"
                step="0.1"
                bindchange="onProgressChange"
                backgroundColor="#f3f4f6"
                activeColor="#7c3aed"
                block-color="#7c3aed"
                block-size="16" />
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-section">
      <button class="primary-btn" bindtap="viewOrders">æŸ¥çœ‹è®¢å•</button>
    </view>
  </view>
</view>