<!-- å‘˜å·¥ç«¯ - æˆ‘çš„ -->
<view class="page">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="header">
    <view class="header-title">é™ªç©åº—</view>
    <view class="header-actions">
      <view class="mode-badge">å‘˜å·¥æ¨¡å¼</view>
      <view class="refresh-btn" bindtap="onRefresh">ğŸ”„</view>
    </view>
  </view>

  <scroll-view scroll-y="{{true}}" class="scroll-content">
    <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
    <view class="user-card">
      <view class="user-header">
        <view class="user-avatar">
          <image wx:if="{{userInfo.avatar}}" src="{{userInfo.avatar}}" mode="aspectFill" class="avatar-image" />
          <text wx:else>ğŸ‘§</text>
        </view>
        <view class="user-info">
          <view class="user-name-row">
            <text class="user-name">{{userInfo.nickname || 'æœªè®¾ç½®æ˜µç§°'}}</text>
            <view class="status-badge">åœ¨çº¿</view>
          </view>
          <text class="user-id">ID: {{userInfo.userId || 'æœªè®¾ç½®'}}</text>
        </view>
      </view>

      <!-- æœ¬æœˆæ•°æ® -->
      <view class="stats-grid" wx:if="{{!loading}}">
        <view class="stat-box stat-purple">
          <text class="stat-value">{{stats.totalOrders}}</text>
          <text class="stat-label">è®¢å•æ•°</text>
        </view>
        <view class="stat-box stat-orange">
          <text class="stat-value">{{stats.approvedReports || 0}}</text>
          <text class="stat-label">æŠ¥å¤‡é€šè¿‡</text>
        </view>
        <view class="stat-box stat-green">
          <text class="stat-value">Â¥{{stats.personalRevenue || 0}}</text>
          <text class="stat-label">ä¸ªäººæµæ°´</text>
        </view>
        <view class="stat-box stat-blue">
          <text class="stat-value">Â¥{{stats.subordinateRevenue || 0}}</text>
          <text class="stat-label">ç›´å±æµæ°´</text>
        </view>
      </view>
    </view>

    <!-- æˆ‘çš„è€æ¿å…¥å£ -->
    <view class="my-boss-entry" bindtap="goToMyBosses">
      <view class="boss-entry-left">
        <text class="boss-entry-icon">ğŸ‘‘</text>
        <text class="boss-entry-text">æˆ‘çš„è€æ¿</text>
      </view>
      <view class="boss-entry-right">
        <text class="boss-count">{{myBosses.length || 0}}ä½</text>
        <text class="boss-arrow">â€º</text>
      </view>
    </view>

    <!-- å¿«æ·åŠŸèƒ½ -->
    <view class="quick-grid">
      <view class="quick-item" wx:for="{{quickActions}}" wx:key="id" data-action="{{item.action}}" bindtap="onQuickAction">
        <view class="quick-icon" style="background: {{item.bgColor}};">
          <text class="quick-emoji">{{item.icon}}</text>
        </view>
        <text class="quick-label">{{item.label}}</text>
      </view>
    </view>

    <!-- ä¸ªäººèµ„æ–™ç»´æŠ¤ -->
    <view class="section-card">
      <view class="section-header-special">
        <text class="section-icon">âœ¨</text>
        <text class="section-title">ä¸ªäººèµ„æ–™</text>
      </view>

      <!-- è‡ªæˆ‘ä»‹ç»å›¾ç‰‡å±•ç¤º -->
      <view class="intro-image-section" wx:if="{{voiceSettings.introImage}}">
        <text class="intro-image-label">è‡ªæˆ‘ä»‹ç»å›¾ç‰‡ï¼š</text>
        <image src="{{voiceSettings.introImage}}" mode="aspectFill" class="intro-image" />
      </view>

      <!-- è¯­éŸ³ä»‹ç»å±•ç¤º -->
      <view class="audio-section" wx:if="{{voiceSettings.audioUrl}}">
        <text class="audio-label">è¯­éŸ³ä»‹ç»ï¼š</text>
        <view class="audio-info">
          <text class="audio-icon">ğŸµ</text>
          <text class="audio-text">å·²ä¸Šä¼ è¯­éŸ³ä»‹ç»</text>
        </view>
      </view>

      <view class="menu-item" wx:for="{{profileMenu}}" wx:key="id" data-action="{{item.action}}" bindtap="onProfileMenu">
        <text class="menu-icon">{{item.icon}}</text>
        <text class="menu-label">{{item.label}}</text>
        <text class="arrow">â€º</text>
      </view>
    </view>

    <!-- å…¶ä»–åŠŸèƒ½ -->
    <view class="section-card">
      <view class="menu-item" wx:for="{{otherMenu}}" wx:key="id" data-action="{{item.action}}" bindtap="onOtherMenu">
        <view class="menu-icon-box" style="background: {{item.bgColor}};">
          <text class="menu-icon-emoji">{{item.icon}}</text>
        </view>
        <view class="menu-info">
          <text class="menu-title">{{item.title}}</text>
          <text class="menu-desc">{{item.desc}}</text>
        </view>
        <text class="arrow">â€º</text>
      </view>
    </view>

    <!-- å¼€å‘è€…ä¿¡æ¯ -->
    <view class="developer-card" wx:if="{{developerInfo}}">
      <view class="dev-avatar">
        <image wx:if="{{developerInfo.avatar}}" src="{{developerInfo.avatar}}" mode="aspectFill" class="dev-avatar-img" />
      </view>
      <view class="dev-info">
        <view class="dev-title">å¼€å‘è€…ï¼š{{developerInfo.nickname || developerInfo.userId}}</view>
        <view class="dev-contact">å¾®ä¿¡å·ï¼šfoggy_dream77</view>
        <view class="dev-contact">é‚®ç®±ï¼šlostinskyfog.dev@gmail.com</view>
      </view>
      <view class="dev-tip-btn" bindtap="showTipQrcode">æ‰“èµ</view>
    </view>
    <view class="dev-thanks">åˆ¶ä½œä¸æ˜“ï¼Œæ„Ÿè°¢æ”¯æŒ â™¥</view>

    <!-- æ‰“èµå¼¹çª— -->
    <view class="tip-popup-mask" wx:if="{{showTipPopup}}" bindtap="closeTipPopup">
      <view class="tip-popup" catchtap="">
        <view class="tip-header">æ„Ÿè°¢æ”¯æŒ</view>
        <image class="tip-qrcode" src="{{tipQrcodeUrl}}" mode="aspectFit" />
        <view class="tip-hint">é•¿æŒ‰è¯†åˆ«äºŒç»´ç æ‰“èµ</view>
        <view class="tip-close" bindtap="closeTipPopup">å…³é—­</view>
      </view>
    </view>

    <view class="bottom-spacer"></view>
  </scroll-view>

  <!-- è‡ªå®šä¹‰TabBar -->
  <custom-tab-bar />
</view>
