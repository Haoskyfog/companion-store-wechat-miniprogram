<!-- å‘˜å·¥ç«¯ - æ’è¡Œæ¦œ -->
<view class="page">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="header">
    <view class="back-btn" bindtap="onBack">â€¹</view>
    <view class="header-title">æ’è¡Œæ¦œ</view>
  </view>

  <!-- æ ‡é¢˜åŒºåŸŸ -->
  <view class="title-section">
    <text class="title-text">ğŸ† å‘˜å·¥æ€»æ’è¡Œæ¦œ</text>
    <text class="subtitle">å…± {{rankings.length}} ä½å‘˜å·¥</text>
  </view>

  <scroll-view scroll-y="{{true}}" class="scroll-content">
    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-state" wx:if="{{loading}}">
      <view class="loading-text">åŠ è½½ä¸­...</view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:elif="{{rankings.length === 0}}">
      <view class="empty-icon">ğŸ“Š</view>
      <view class="empty-text">æš‚æ— å‘˜å·¥æ•°æ®</view>
      <view class="empty-desc">è¯·è”ç³»ç®¡ç†å‘˜æ·»åŠ å‘˜å·¥ä¿¡æ¯</view>
    </view>

    <!-- æ’ååˆ—è¡¨ -->
    <view class="ranking-section" wx:else>
      <view class="section-title">
        <text class="title-icon">ğŸ†</text>
        <text class="title-text">æ€»æ’è¡Œæ¦œ</text>
      </view>

      <!-- å‰ä¸‰åç‰¹æ®Šå±•ç¤º -->
      <view class="top-three-section" wx:if="{{rankings.length >= 3}}">
        <view class="top-three">
          <!-- ç¬¬äºŒå -->
          <view class="top-item top-2" wx:if="{{rankings[1]}}">
            <view class="top-avatar">
              <image wx:if="{{rankings[1].userInfo && rankings[1].userInfo.avatar}}" src="{{rankings[1].userInfo.avatar}}" mode="aspectFill" class="avatar-image" />
              <text wx:else class="avatar-emoji">ğŸ¥ˆ</text>
              <view class="rank-badge badge-2">2</view>
            </view>
            <text class="top-name">{{rankings[1].userInfo.nickname}}</text>
            <text class="top-orders highlight">{{rankings[1].orderCount}} é€šè¿‡</text>
          </view>

          <!-- ç¬¬ä¸€å -->
          <view class="top-item top-1" wx:if="{{rankings[0]}}">
            <view class="top-avatar top-1-avatar">
              <image wx:if="{{rankings[0].userInfo && rankings[0].userInfo.avatar}}" src="{{rankings[0].userInfo.avatar}}" mode="aspectFill" class="avatar-image" />
              <text wx:else class="avatar-emoji">ğŸ¥‡</text>
              <view class="rank-badge badge-1">1</view>
            </view>
            <text class="top-name">{{rankings[0].userInfo.nickname}}</text>
            <text class="top-orders highlight">{{rankings[0].orderCount}} é€šè¿‡</text>
          </view>

          <!-- ç¬¬ä¸‰å -->
          <view class="top-item top-3" wx:if="{{rankings[2]}}">
            <view class="top-avatar">
              <image wx:if="{{rankings[2].userInfo && rankings[2].userInfo.avatar}}" src="{{rankings[2].userInfo.avatar}}" mode="aspectFill" class="avatar-image" />
              <text wx:else class="avatar-emoji">ğŸ¥‰</text>
              <view class="rank-badge badge-3">3</view>
            </view>
            <text class="top-name">{{rankings[2].userInfo.nickname}}</text>
            <text class="top-orders highlight">{{rankings[2].orderCount}} é€šè¿‡</text>
          </view>
        </view>
      </view>

      <!-- å®Œæ•´æ’ååˆ—è¡¨ -->
      <view class="ranking-list">
        <view class="ranking-item {{item.rank <= 3 ? 'top-rank' : ''}}" wx:for="{{rankings}}" wx:key="staffId">
          <view class="rank-number {{getRankClass(item.rank)}}">
            <text wx:if="{{item.rank > 3}}">{{getRankIcon(item.rank)}}</text>
            <text wx:else>{{getRankIcon(item.rank)}}</text>
          </view>
          <view class="staff-avatar">
            <image wx:if="{{item.userInfo && item.userInfo.avatar}}" src="{{item.userInfo.avatar}}" mode="aspectFill" class="avatar-image" />
            <view wx:else class="avatar-placeholder">
              <text class="avatar-emoji">ğŸ‘¤</text>
            </view>
          </view>
          <view class="staff-info">
            <text class="staff-name">{{item.userInfo.nickname}}</text>
            <text class="staff-id">ID: {{item.userInfo.userId}}</text>
          </view>
          <view class="staff-stats">
            <text class="stat-orders">{{item.orderCount}} é€šè¿‡</text>
          </view>
        </view>
      </view>
    </view>

    <view class="bottom-spacer"></view>
  </scroll-view>

  <!-- è‡ªå®šä¹‰TabBar -->
  <custom-tab-bar />
</view>
